<app-page-header
  [titulo]="'Campañas Activas - Solo Visualización'"
  [subtitulo]="'Visualiza todas las campañas activas. Este es un componente de solo lectura, no permite modificaciones.'">
</app-page-header>

<div class="busqueda-container">
  <mat-form-field appearance="outline" class="busqueda-field">
    <mat-label>Buscar campañas activas</mat-label>
    <input matInput (input)="aplicarFiltro($event)" placeholder="Buscar por nombre, descripción, tipo, ubicación..." />
    <mat-icon matPrefix>search</mat-icon>
  </mat-form-field>
</div>

<div *ngIf="dataSource.data.length === 0" class="sin-datos">
  <mat-icon>info</mat-icon>
  <p>No hay campañas activas disponibles.</p>
</div>

<div class="campanias-grid">
  <mat-card *ngFor="let campania of dataSource.data" class="campania-card">
    <mat-card-header>
      <mat-card-title>{{ campania.nombre }}</mat-card-title>
      <mat-card-subtitle>
        <mat-chip-set>
          <mat-chip>
            <mat-icon matChipAvatar>category</mat-icon>
            {{ campania.tipoDonacionPrincipalId ? getTipoDonacionNombre(campania.tipoDonacionPrincipalId) : campania.tipoDonacionPrincipal }}
          </mat-chip>
        </mat-chip-set>
      </mat-card-subtitle>
    </mat-card-header>
    
    <mat-card-content>
      <p class="descripcion">{{ campania.descripcion }}</p>
      
      <div class="info-section">
        <div class="info-item">
          <mat-icon>event</mat-icon>
          <span><strong>Fecha límite:</strong> {{ formatearFecha(campania.fechaLimite) }}</span>
        </div>
        
        <div class="info-item">
          <mat-icon>location_on</mat-icon>
          <span>
            <strong>Punto de recolección:</strong> 
            {{ campania.puntoRecoleccionId ? getPuntoRecoleccionNombre(campania.puntoRecoleccionId) : campania.ubicacionRecoleccion }}
          </span>
        </div>
        
        <div class="info-item">
          <mat-icon>people</mat-icon>
          <span><strong>Beneficiario:</strong> {{ getBeneficiarioNombre(campania.beneficiarioId) }}</span>
        </div>
      </div>
      
      <div class="tipos-aceptados">
        <strong>Acepta:</strong>
        <mat-chip-set>
          <mat-chip *ngIf="campania.aceptaRopa">
            <mat-icon matChipAvatar>check_circle</mat-icon>
            Ropa
          </mat-chip>
          <mat-chip *ngIf="campania.aceptaAlimentos">
            <mat-icon matChipAvatar>check_circle</mat-icon>
            Alimentos
          </mat-chip>
          <mat-chip *ngIf="campania.aceptaJuguetes">
            <mat-icon matChipAvatar>check_circle</mat-icon>
            Juguetes
          </mat-chip>
        </mat-chip-set>
      </div>
    </mat-card-content>
    
    <mat-card-actions>
      <button mat-button color="primary" routerLink="/campanias">
        <mat-icon>edit</mat-icon>
        Gestionar campañas
      </button>
    </mat-card-actions>
  </mat-card>
</div>

