{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatChipsModule } from '@angular/material/chips';\nimport { FormsModule } from '@angular/forms';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatTableModule, MatTableDataSource } from '@angular/material/table';\nimport { PageHeaderComponent } from '../shared/page-header.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/campanias.service\";\nimport * as i2 from \"../../services/tipos-donacion.service\";\nimport * as i3 from \"../../services/puntos-recoleccion.service\";\nimport * as i4 from \"../../services/beneficiarios.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/router\";\nimport * as i7 from \"@angular/material/card\";\nimport * as i8 from \"@angular/material/button\";\nimport * as i9 from \"@angular/material/icon\";\nimport * as i10 from \"@angular/material/chips\";\nimport * as i11 from \"@angular/material/input\";\nimport * as i12 from \"@angular/material/form-field\";\nfunction CampaniasViewComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8)(1, \"mat-icon\");\n    i0.ɵɵtext(2, \"info\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4, \"No hay campa\\u00F1as activas disponibles.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction CampaniasViewComponent_mat_card_10_mat_chip_39_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-chip\")(1, \"mat-icon\", 10);\n    i0.ɵɵtext(2, \"check_circle\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \" Ropa \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CampaniasViewComponent_mat_card_10_mat_chip_40_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-chip\")(1, \"mat-icon\", 10);\n    i0.ɵɵtext(2, \"check_circle\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \" Alimentos \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CampaniasViewComponent_mat_card_10_mat_chip_41_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-chip\")(1, \"mat-icon\", 10);\n    i0.ɵɵtext(2, \"check_circle\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \" Juguetes \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CampaniasViewComponent_mat_card_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-card\", 9)(1, \"mat-card-header\")(2, \"mat-card-title\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"mat-card-subtitle\")(5, \"mat-chip-set\")(6, \"mat-chip\")(7, \"mat-icon\", 10);\n    i0.ɵɵtext(8, \"category\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(10, \"mat-card-content\")(11, \"p\", 11);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\", 12)(14, \"div\", 13)(15, \"mat-icon\");\n    i0.ɵɵtext(16, \"event\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"span\")(18, \"strong\");\n    i0.ɵɵtext(19, \"Fecha l\\u00EDmite:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(21, \"div\", 13)(22, \"mat-icon\");\n    i0.ɵɵtext(23, \"location_on\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"span\")(25, \"strong\");\n    i0.ɵɵtext(26, \"Punto de recolecci\\u00F3n:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(27);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(28, \"div\", 13)(29, \"mat-icon\");\n    i0.ɵɵtext(30, \"people\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(31, \"span\")(32, \"strong\");\n    i0.ɵɵtext(33, \"Beneficiario:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(34);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(35, \"div\", 14)(36, \"strong\");\n    i0.ɵɵtext(37, \"Acepta:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(38, \"mat-chip-set\");\n    i0.ɵɵtemplate(39, CampaniasViewComponent_mat_card_10_mat_chip_39_Template, 4, 0, \"mat-chip\", 15)(40, CampaniasViewComponent_mat_card_10_mat_chip_40_Template, 4, 0, \"mat-chip\", 15)(41, CampaniasViewComponent_mat_card_10_mat_chip_41_Template, 4, 0, \"mat-chip\", 15);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(42, \"mat-card-actions\")(43, \"button\", 16)(44, \"mat-icon\");\n    i0.ɵɵtext(45, \"edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(46, \" Gestionar campa\\u00F1as \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const campania_r1 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(campania_r1.nombre);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\" \", campania_r1.tipoDonacionPrincipalId ? ctx_r1.getTipoDonacionNombre(campania_r1.tipoDonacionPrincipalId) : campania_r1.tipoDonacionPrincipal, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(campania_r1.descripcion);\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.formatearFecha(campania_r1.fechaLimite), \"\");\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate1(\" \", campania_r1.puntoRecoleccionId ? ctx_r1.getPuntoRecoleccionNombre(campania_r1.puntoRecoleccionId) : campania_r1.ubicacionRecoleccion, \" \");\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.getBeneficiarioNombre(campania_r1.beneficiarioId), \"\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", campania_r1.aceptaRopa);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", campania_r1.aceptaAlimentos);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", campania_r1.aceptaJuguetes);\n  }\n}\nexport let CampaniasViewComponent = /*#__PURE__*/(() => {\n  class CampaniasViewComponent {\n    constructor(campaniasService, tiposDonacionService, puntosRecoleccionService, beneficiariosService) {\n      this.campaniasService = campaniasService;\n      this.tiposDonacionService = tiposDonacionService;\n      this.puntosRecoleccionService = puntosRecoleccionService;\n      this.beneficiariosService = beneficiariosService;\n      this.campaniasActivas = [];\n      this.dataSource = new MatTableDataSource([]);\n      this.terminoBusqueda = '';\n    }\n    ngOnInit() {\n      this.cargarCampaniasActivas();\n    }\n    cargarCampaniasActivas() {\n      this.campaniasService.getAll().subscribe(campanias => {\n        this.campaniasActivas = campanias.filter(c => c.activa);\n        this.dataSource.data = this.campaniasActivas;\n      });\n    }\n    aplicarFiltro(event) {\n      const filterValue = event.target.value;\n      this.terminoBusqueda = filterValue;\n      this.dataSource.filter = filterValue.trim().toLowerCase();\n      this.dataSource.filterPredicate = (data, filter) => {\n        const searchText = filter.toLowerCase();\n        return data.nombre.toLowerCase().includes(searchText) || data.descripcion.toLowerCase().includes(searchText) || data.tipoDonacionPrincipal.toLowerCase().includes(searchText) || data.ubicacionRecoleccion.toLowerCase().includes(searchText);\n      };\n    }\n    getTipoDonacionNombre(id) {\n      if (!id) return 'N/A';\n      const tipos = this.tiposDonacionService.getLocal();\n      const tipo = tipos.find(t => t.id === id);\n      return tipo ? tipo.nombre : 'N/A';\n    }\n    getPuntoRecoleccionNombre(id) {\n      if (!id) return 'N/A';\n      const puntos = this.puntosRecoleccionService.getLocal();\n      const punto = puntos.find(p => p.id === id);\n      return punto ? `${punto.nombre} - ${punto.ciudad}` : 'N/A';\n    }\n    getBeneficiarioNombre(id) {\n      if (!id) return 'No especificado';\n      const beneficiarios = this.beneficiariosService.getLocal();\n      const beneficiario = beneficiarios.find(b => b.id === id);\n      return beneficiario ? beneficiario.nombre : 'No especificado';\n    }\n    formatearFecha(fecha) {\n      if (!fecha) return 'No especificada';\n      const date = new Date(fecha);\n      return date.toLocaleDateString('es-ES', {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric'\n      });\n    }\n    static {\n      this.ɵfac = function CampaniasViewComponent_Factory(t) {\n        return new (t || CampaniasViewComponent)(i0.ɵɵdirectiveInject(i1.CampaniasService), i0.ɵɵdirectiveInject(i2.TiposDonacionService), i0.ɵɵdirectiveInject(i3.PuntosRecoleccionService), i0.ɵɵdirectiveInject(i4.BeneficiariosService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: CampaniasViewComponent,\n        selectors: [[\"app-campanias-view\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 11,\n        vars: 4,\n        consts: [[3, \"titulo\", \"subtitulo\"], [1, \"busqueda-container\"], [\"appearance\", \"outline\", 1, \"busqueda-field\"], [\"matInput\", \"\", \"placeholder\", \"Buscar por nombre, descripci\\u00F3n, tipo, ubicaci\\u00F3n...\", 3, \"input\"], [\"matPrefix\", \"\"], [\"class\", \"sin-datos\", 4, \"ngIf\"], [1, \"campanias-grid\"], [\"class\", \"campania-card\", 4, \"ngFor\", \"ngForOf\"], [1, \"sin-datos\"], [1, \"campania-card\"], [\"matChipAvatar\", \"\"], [1, \"descripcion\"], [1, \"info-section\"], [1, \"info-item\"], [1, \"tipos-aceptados\"], [4, \"ngIf\"], [\"mat-button\", \"\", \"color\", \"primary\", \"routerLink\", \"/campanias\"]],\n        template: function CampaniasViewComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelement(0, \"app-page-header\", 0);\n            i0.ɵɵelementStart(1, \"div\", 1)(2, \"mat-form-field\", 2)(3, \"mat-label\");\n            i0.ɵɵtext(4, \"Buscar campa\\u00F1as activas\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(5, \"input\", 3);\n            i0.ɵɵlistener(\"input\", function CampaniasViewComponent_Template_input_input_5_listener($event) {\n              return ctx.aplicarFiltro($event);\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(6, \"mat-icon\", 4);\n            i0.ɵɵtext(7, \"search\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵtemplate(8, CampaniasViewComponent_div_8_Template, 5, 0, \"div\", 5);\n            i0.ɵɵelementStart(9, \"div\", 6);\n            i0.ɵɵtemplate(10, CampaniasViewComponent_mat_card_10_Template, 47, 9, \"mat-card\", 7);\n            i0.ɵɵelementEnd();\n          }\n          if (rf & 2) {\n            i0.ɵɵproperty(\"titulo\", \"Campa\\u00F1as Activas - Solo Visualizaci\\u00F3n\")(\"subtitulo\", \"Visualiza todas las campa\\u00F1as activas. Este es un componente de solo lectura, no permite modificaciones.\");\n            i0.ɵɵadvance(8);\n            i0.ɵɵproperty(\"ngIf\", ctx.dataSource.data.length === 0);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngForOf\", ctx.dataSource.data);\n          }\n        },\n        dependencies: [CommonModule, i5.NgForOf, i5.NgIf, RouterModule, i6.RouterLink, MatCardModule, i7.MatCard, i7.MatCardActions, i7.MatCardContent, i7.MatCardHeader, i7.MatCardSubtitle, i7.MatCardTitle, MatButtonModule, i8.MatButton, MatIconModule, i9.MatIcon, MatChipsModule, i10.MatChip, i10.MatChipAvatar, i10.MatChipSet, FormsModule, MatInputModule, i11.MatInput, i12.MatFormField, i12.MatLabel, i12.MatPrefix, MatTableModule, PageHeaderComponent],\n        styles: [\".busqueda-container[_ngcontent-%COMP%]{margin:1rem 0 2rem}.busqueda-field[_ngcontent-%COMP%]{width:100%;max-width:500px}.sin-datos[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:#666}.sin-datos[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;margin-bottom:1rem;color:#999}.campanias-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:1.5rem;margin-top:1rem}.campania-card[_ngcontent-%COMP%]{min-height:300px;display:flex;flex-direction:column}.campania-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{flex:1}.descripcion[_ngcontent-%COMP%]{margin:1rem 0;color:#555;line-height:1.6}.info-section[_ngcontent-%COMP%]{margin:1rem 0}.info-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.5rem;margin-bottom:.75rem}.info-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#1976d2;margin-top:.25rem}.info-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;line-height:1.5}.tipos-aceptados[_ngcontent-%COMP%]{margin-top:1rem;padding-top:1rem;border-top:1px solid #e0e0e0}.tipos-aceptados[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem}mat-chip-set[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}mat-card-actions[_ngcontent-%COMP%]{padding:0 16px 16px}@media (max-width: 768px){.campanias-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}\"]\n      });\n    }\n  }\n  return CampaniasViewComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}